deployment:
  role: data_plane
  role_data_plane:
    config_provider: yaml

apisix:
  node_listen: 9080
  enable_admin: true
  ssl:
    ssl_trusted_certificate: "/certs/ca.crt"

plugins:
  - openid-connect
  - authz-openfga
  - grpc-transcode

nginx_config:
  http_configuration_snippet: |
    # Cach√© necesaria para el plugin authz-openfga
    lua_shared_dict authz_openfga_authorization_model 1m;
  envs:
    - APISIX_CLIENT_CERT
    - APISIX_CLIENT_KEY
    - APISIX_OIDC_CLIENT_ID
    - APISIX_OIDC_CLIENT_SECRET